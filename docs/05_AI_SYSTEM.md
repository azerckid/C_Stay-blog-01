# AI System Documentation

이 문서는 STAYnC 프로젝트에 적용된 AI 시스템의 아키텍처, 사용 모델 및 통합 서비스에 대한 상세 명세를 제공합니다.

## 시스템 개요

STAYnC는 서비스 전반에서 스마트한 사용자 경험을 제공하기 위해 **Google Gemini AI**를 핵심 엔진으로 활용합니다. 주요 활용 분야는 다음과 같습니다.

1.  **AI 하이브리드 검색**: 문맥 이해 및 유사도 기반 정보 추출
2.  **컨시어지 서비스**: 자연어 기반의 여행 정보 제공 및 대화

## 사용 모델 명세

| 구분 | 기능 | 모델명 | 주요 특징 |
| :--- | :--- | :--- | :--- |
| **Embedding** | 텍스트의 벡터화 | `text-embedding-004` | 768차원 임베딩, 다국어 처리 최적화, 높은 검색 정확도 |
| **Chat / Reasoning** | 컨시어지 대화 및 분석 | `gemini-1.5-flash` | 빠른 응답 속도, 긴 컨텍스트 윈도우 지원 |

## 세부 구현 사항

### 1. 텍스트 임베딩 (`text-embedding-004`)

*   **용도**: 검색 고도화 (RAG 시스템 기반)
*   **작동 방식**:
    *   사용자가 트윗을 게시하거나 수정할 때 본문과 태그를 결합한 텍스트를 임베딩으로 변환합니다.
    *   변환된 768차원 벡터 데이터는 데이터베이스의 `TweetEmbedding` 테이블에 저장됩니다.
*   **검색 로직**:
    *   검색 의도를 벡터로 변환 후 데이터베이스 내 `vector_distance_cos`를 통해 가장 연관성 높은 결과 추출.

### 2. 하이퍼파라미터 및 설정

*   **유사도 임계값 (Similarity Threshold)**: `0.4`
    *   코사인 거리 기준 0.4 미만인 경우에만 검색 결과에 포함하여 정보의 관련성을 유지합니다.
*   **최대 토큰 및 필터링**:
    *   Gemini API 호출 시 불필요한 공백과 특수문자를 정제하여 입력 데이터의 밀도를 높입니다.

## 보안 및 관리

*   **API Key 관리**: `GEMINI_API_KEY` 환경 변수를 통해 서버 측에서만 안전하게 관리됩니다.
*   **에러 핸들링**: AI 서비스 장애 시 시스템 전체에 영향이 가지 않도록 `Fallback` 로직(기본 키워드 검색으로 자동 전환)이 구현되어 있습니다.

---
*마지막 업데이트: 2025-12-30*
