# AI 포스팅 기능 개선 문서

> **작성일시:** 2026년 2월 7일 (금) 오전 02:49 KST
> **대상 파일:** `app/components/ai/log-mode-overlay.tsx`
> **문서번호:** 12_AI_POSTING_IMPROVEMENTS
> **목적:** 사용자 불편 사항 분석 및 개선 방향 정리 (차후 개선 계획 수립용)

---

## 1. 문제 요약

| # | 문제 | 심각도 | 영향 범위 |
|---|------|--------|----------|
| 1 | 모바일 가로(Landscape) 모드에서 UI가 카메라 화면을 과도하게 가림 | 높음 | 모바일 전체 |
| 2 | 음성을 AI 변환 없이 그대로 받아 적는 모드가 없음 | 중간 | 전체 사용자 |

---

## 2. 문제 1: 모바일 Landscape 모드 UI 과잉 점유

### 2.1 현상

모바일에서 카메라를 가로로 돌려 촬영할 때, 하단 컨트롤 패널이 화면의 대부분을 가려 카메라 프리뷰가 거의 보이지 않는다.

### 2.2 원인 분석

현재 하단 패널의 구성 요소별 공간 점유:

```
┌─────────────────────────────────────────┐
│ 카메라 프리뷰 영역                        │  ← 가로 모드에서 높이 ~320-400px
├─────────────────────────────────────────┤
│ 그라데이션 오버레이 (h-1/2)               │  ← 화면 절반을 차지하는 반투명 그라데이션
├─────────────────────────────────────────┤
│ 스타일 선택 버튼 (3열 2행 그리드)          │  ← ~120px 높이
│ ┌─────────┬─────────┬─────────┐         │
│ │ 감성적   │ 정보전달  │ 위트    │         │
│ ├─────────┴─────────┴─────────┤         │
│ │ 스마트 분석                   │         │
│ └─────────────────────────────┘         │
├─────────────────────────────────────────┤
│ 음성 텍스트 미리보기                      │  ← ~40px (텍스트 존재 시)
├─────────────────────────────────────────┤
│ 녹음 버튼 (w-24 h-24 = 96px)            │  ← 96px + 펄스 애니메이션 160px
├─────────────────────────────────────────┤
│ 안내 텍스트 ("눌러서 감상을 말해보세요")    │  ← ~40px
├─────────────────────────────────────────┤
│ 패딩 (p-6 pb-12)                        │  ← 72px (상하 패딩)
└─────────────────────────────────────────┘
```

**총 하단 UI 점유 높이: 약 370~400px**

모바일 가로 모드 뷰포트 높이가 약 320~400px이므로, UI가 카메라 화면을 **거의 100% 가리는** 상황이 발생한다.

### 2.3 현재 코드 문제점

```
파일: app/components/ai/log-mode-overlay.tsx
```

**Line 253** - 최상위 컨테이너:
```tsx
<div className="fixed inset-0 z-[100] bg-black overflow-hidden flex flex-col">
```
- `flex-col` 고정 레이아웃으로, 가로/세로 모드 구분 없이 동일한 구조

**Line 289** - 스타일 선택기:
```tsx
<div className="w-full max-w-sm grid grid-cols-3 gap-3 p-1.5 rounded-2xl ...">
```
- 4개 버튼이 3열 그리드 → 2행 차지, 가로 모드에서 불필요하게 높은 영역

**Line 348~401** - 녹음 버튼 영역:
```tsx
<div className="relative flex items-center justify-center">
    {/* 펄스 애니메이션: 120px, 160px 원형 */}
    <button className="w-24 h-24 rounded-full ...">
```
- 96px 크기의 버튼 + 160px 펄스 애니메이션이 가로 모드에서 과도한 공간 점유

**Line 469** - 그라데이션 오버레이:
```tsx
<div className="absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t ...">
```
- 화면 하단 50%를 어둡게 처리 → 가로 모드에서 카메라 화면의 절반이 어두워짐

### 2.4 개선 방향

#### 방안 A: Landscape 전용 레이아웃 분기

가로 모드를 감지하여 UI 배치를 완전히 변경한다.

```
[세로 모드 - 현재]                [가로 모드 - 개선]
┌──────────────┐              ┌──────────────────────────┐
│              │              │                    │스타일│
│   카메라     │              │     카메라          │선택  │
│   프리뷰     │              │     프리뷰          │     │
│              │              │                    │ 🎤  │
├──────────────┤              │                    │버튼  │
│  스타일 선택  │              └──────────────────────────┘
│    🎤 버튼   │
└──────────────┘
```

- 가로 모드: 컨트롤을 **화면 우측에 세로 배치**하여 카메라 영역 최대 확보
- `window.matchMedia("(orientation: landscape)")` 또는 `screen.orientation` API로 감지
- 또는 Tailwind의 `landscape:` variant 활용

#### 방안 B: 최소화 가능한 접이식 UI

하단 패널을 접고 펼칠 수 있는 토글 방식으로 변경한다.

```
[펼침 상태]                    [접힌 상태]
┌──────────────┐              ┌──────────────┐
│   카메라     │              │              │
│   프리뷰     │              │   카메라      │
├──────────────┤              │   프리뷰      │
│  스타일 선택  │              │   (전체)      │
│    🎤 버튼   │              │         [▲]  │
└──────────────┘              └──────────────┘
```

- 기본 상태: 🎤 버튼만 표시 (최소 UI)
- 버튼 위 화살표 또는 스와이프로 스타일 선택기 등 추가 옵션 표시
- 녹음 중에는 자동으로 UI 접힘

#### 방안 C: 혼합 (권장)

- **세로 모드**: 현재 레이아웃 유지 (약간의 컴팩트화)
- **가로 모드**: 방안 A 적용 (우측 사이드바 레이아웃)
- **공통**: 녹음 중일 때 스타일 선택기 자동 숨김

### 2.5 세부 개선 포인트

| 항목 | 현재 | 개선안 |
|------|------|--------|
| 스타일 선택기 | 3열 2행 그리드 (높이 ~120px) | 가로: 1열 4행 세로 배치, 세로: 4열 1행 가로 배치 |
| 녹음 버튼 | 96px 고정 | 가로: 64px로 축소 |
| 펄스 애니메이션 | 120px, 160px 원형 | 가로: 80px, 100px로 축소 |
| 그라데이션 | `h-1/2` (화면 50%) | 가로: `h-1/4` 또는 우측에만 적용 |
| 하단 패딩 | `pb-12` (48px) | 가로: `landscape:pb-4` (16px) |
| 안내 텍스트 | 항상 표시 | 가로: 숨김 처리 |
| 상단 위치바 | `pt-12` (48px, safe area) | 가로: `landscape:pt-4` |

---

## 3. 문제 2: 음성 직접 받아쓰기 모드 부재

### 3.1 현상

현재 사용자가 음성을 입력하면 **반드시 AI가 변환/가공하여 글을 생성**한다. 사용자가 말한 내용을 그대로 트윗 본문으로 사용하고 싶어도 그 방법이 없다.

### 3.2 현재 동작 분석

```
파일: app/components/ai/log-mode-overlay.tsx
```

현재 모드별 음성 처리 방식:

| 스타일 | 음성 입력 | 처리 방식 |
|--------|----------|----------|
| 감성적 | 사용자 음성 → STT 텍스트 | AI가 감성적 톤으로 **재작성** |
| 정보 전달 | 사용자 음성 → STT 텍스트 | AI가 정보 전달 톤으로 **재작성** |
| 위트/발랄 | 사용자 음성 → STT 텍스트 | AI가 위트있게 **재작성** |
| 스마트 분석 | 음성 입력 없음 | AI가 사진만 보고 **자동 생성** |

**Line 188** - 핵심 문제 코드:
```tsx
const finalSpeechText = isAuto ? "" : (transcribedText.trim() || "현장의 아름다운 풍경과 분위기");
```
- 음성 텍스트가 항상 AI에 전달되어 가공됨
- 음성이 없으면 기본 문구("현장의 아름다운 풍경과 분위기")가 대체 입력으로 사용됨

**Line 148** - 녹음 중지 시 자동 AI 호출:
```tsx
if (isRecording) {
    recognition.stop();
    setIsRecording(false);
    setTimeout(() => {
        generateLog();   // ← 녹음 중지 후 무조건 AI 생성 호출
    }, 500);
}
```
- 녹음이 끝나면 자동으로 `generateLog()` 호출 → AI 가공이 강제됨

### 3.3 사용자 시나리오 분석

**AI 변환이 필요한 경우:**
> 사용자: "여기 바다 진짜 예쁘고 파도 소리 좋다"
> → AI 결과: "잔잔한 파도 소리가 마음을 적시는 오후, 바다는 어느 때보다 고요하고 아름답다."

**직접 받아쓰기가 필요한 경우:**
> 사용자: "오늘 부산 해운대에서 친구들이랑 서핑했다. 파도가 높아서 진짜 재밌었음!"
> → 원하는 결과: "오늘 부산 해운대에서 친구들이랑 서핑했다. 파도가 높아서 진짜 재밌었음!" (그대로)

현재는 두 번째 시나리오를 지원하지 않아, 사용자가 직접 글을 쓰려면 결과 화면에서 AI가 생성한 텍스트를 삭제하고 다시 타이핑해야 한다.

### 3.4 개선 방향

#### 방안 A: "직접 쓰기" 스타일 모드 추가

기존 4가지 스타일에 5번째 모드를 추가한다.

```
현재: [감성적] [정보 전달] [위트/발랄] [스마트 분석]
개선: [감성적] [정보 전달] [위트/발랄] [스마트 분석] [직접 쓰기]
```

| 항목 | 설명 |
|------|------|
| 모드명 | "직접 쓰기" 또는 "음성 메모" |
| 동작 | STT 텍스트를 AI 가공 없이 그대로 결과로 사용 |
| 사진 | 캡처하여 첨부 (동일) |
| 결과 화면 | AI 결과 대신 STT 텍스트를 바로 표시, 편집 가능 |

`WritingStyle` 타입 변경:
```
현재: type WritingStyle = "emotional" | "information" | "witty" | "auto";
개선: type WritingStyle = "emotional" | "information" | "witty" | "auto" | "dictation";
```

#### 방안 B: 녹음 버튼 동작 분리

녹음 중지 후 AI 호출을 자동으로 하지 않고, 사용자에게 선택지를 제공한다.

```
녹음 중지 후:
┌──────────────────────────────┐
│  "오늘 해운대에서 서핑했다"    │
│                              │
│  [AI로 다듬기]  [그대로 쓰기]  │
└──────────────────────────────┘
```

- "AI로 다듬기": 기존처럼 Gemini AI가 스타일에 맞게 재작성
- "그대로 쓰기": STT 텍스트 + 사진을 바로 결과 화면으로 이동

#### 방안 C: 혼합 (권장)

- **"직접 쓰기" 모드 추가** (방안 A)를 기본으로 하되
- 해당 모드 선택 시 녹음 중지 후 **AI API 호출을 건너뛰고** 바로 결과 확인 화면으로 이동
- 결과 화면에서 "AI로 다듬기" 버튼을 추가하여, 필요 시 사후에 AI 가공 가능

### 3.5 처리 흐름 비교

```
[현재 흐름 - AI 모드만 존재]
음성 입력 → STT 변환 → 녹음 중지 → 사진 캡처 → AI API 호출 → 결과 표시

[개선 흐름 - "직접 쓰기" 모드]
음성 입력 → STT 변환 → 녹음 중지 → 사진 캡처 → 바로 결과 표시
                                                    ↓ (선택적)
                                              [AI로 다듬기] 버튼
                                                    ↓
                                              AI API 호출 → 결과 갱신
```

### 3.6 변경이 필요한 코드 영역

| 위치 | 변경 내용 |
|------|----------|
| Line 25 | `WritingStyle` 타입에 `"dictation"` 추가 |
| Line 137~155 | `handleToggleRecording`에서 dictation 모드일 때 AI 호출 건너뛰기 |
| Line 163~210 | `generateLog`에서 dictation 모드 분기 처리 |
| Line 288~338 | 스타일 선택기에 "직접 쓰기" 버튼 추가 |
| Line 405~466 | 결과 화면에 "AI로 다듬기" 버튼 추가 (dictation 모드 전용) |

---

## 4. 개선 우선순위

| 순위 | 개선 항목 | 난이도 | 영향도 | 비고 |
|------|----------|--------|--------|------|
| 1 | Landscape 모드 레이아웃 개선 | 중 | 높음 | 모바일 촬영 UX의 핵심 |
| 2 | "직접 쓰기" 모드 추가 | 낮 | 중간 | 기존 코드에 분기만 추가 |
| 3 | 결과 화면 "AI로 다듬기" 버튼 | 낮 | 중간 | dictation → AI 전환 편의 |
| 4 | 녹음 중 UI 자동 최소화 | 낮 | 낮음 | 부가적 UX 개선 |

---

## 5. 참고: 영향 받는 파일 목록

| 파일 | 변경 유형 |
|------|----------|
| `app/components/ai/log-mode-overlay.tsx` | UI 레이아웃 변경, 모드 추가, 로직 분기 |
| `app/routes/travel/api.ai-travel-log.ts` | 변경 없음 (dictation 모드에서 호출 안 함) |
| `app/routes/tweets/api.tweets.ts` | 변경 없음 (게시 흐름 동일) |
| `app/app.css` | Landscape 미디어 쿼리 추가 가능 |

> **참고:** "직접 쓰기" 모드는 AI API를 호출하지 않으므로 백엔드 변경이 불필요하다. Landscape 레이아웃 개선도 프론트엔드(CSS/TSX)만 수정하면 되므로, 두 개선 사항 모두 `log-mode-overlay.tsx`에 집중된다.
